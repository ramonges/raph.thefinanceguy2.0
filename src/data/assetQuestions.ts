import { TradingQuestion } from '@/types'

export interface AssetSubcategory {
  id: string
  label: string
  questions: TradingQuestion[]
}

export interface AssetCategory {
  id: string
  label: string
  color: string
  subcategories: Record<string, AssetSubcategory>
}

export const assetQuestions: Record<string, AssetCategory> = {
  'fixed-income': {
    id: 'fixed-income',
    label: 'Fixed Income',
    color: '#6366f1',
    subcategories: {
      'government-bonds': {
        id: 'government-bonds',
        label: 'Government bonds',
        questions: [
          {
            id: 1,
            question: 'What is the relationship between bond prices and interest rates?',
            answer: 'Inverse relationship - when interest rates rise, bond prices fall, and vice versa. This is because existing bonds with lower rates become less attractive compared to new bonds issued at higher rates.',
            explanation: [
              'Bond prices move inversely to interest rates due to present value calculations.',
              'When rates rise, new bonds offer higher yields, making existing bonds less valuable.',
              'Duration measures the sensitivity: price change ≈ -Duration × yield change.',
              'Longer duration bonds are more sensitive to rate changes.',
            ],
            hint: 'Think about present value and opportunity cost',
            difficulty: 'easy',
            targetTime: 60,
          },
          {
            id: 2,
            question: 'What factors affect the yield curve, and what does an inverted yield curve typically signal?',
            answer: 'The yield curve is affected by monetary policy, inflation expectations, and economic growth outlook. An inverted yield curve (short-term rates higher than long-term) often signals an upcoming recession as investors expect rate cuts in the future.',
            explanation: [
              'Normal curve: long rates > short rates (expectation of growth and inflation).',
              'Inverted curve: short rates > long rates (expectation of recession and rate cuts).',
              'Steep curve: strong growth expectations, or loose monetary policy.',
              'Flat curve: uncertain economic outlook or transition period.',
            ],
            hint: 'Yield curve reflects market expectations about future rates and economy',
            difficulty: 'medium',
            targetTime: 90,
          },
        ],
      },
      'corporate-bonds': {
        id: 'corporate-bonds',
        label: 'Corporate bonds',
        questions: [
          {
            id: 1,
            question: 'What is the difference between investment grade and high yield bonds, and how does this affect pricing?',
            answer: 'Investment grade bonds (BBB- or higher) have lower default risk and lower yields. High yield bonds (below BBB-) have higher default risk and must offer higher yields to compensate investors. The credit spread widens during economic uncertainty.',
            explanation: [
              'Investment grade: BBB- or higher rating, lower default probability, tighter spreads.',
              'High yield: below BBB-, higher default risk, wider spreads (typically 300-1000+ bps).',
              'Credit spread = corporate yield - Treasury yield of same maturity.',
              'Spreads widen in recessions, tighten in expansions.',
            ],
            hint: 'Credit spread compensates for default risk',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'How do covenants protect bondholders, and what are maintenance vs incurrence covenants?',
            answer: 'Covenants are contractual restrictions that protect bondholders. Maintenance covenants require ongoing compliance (e.g., debt/EBITDA ratios), while incurrence covenants only apply when the company takes specific actions (e.g., issuing new debt).',
            explanation: [
              'Maintenance covenants: must maintain financial ratios continuously (e.g., leverage < 4x).',
              'Incurrence covenants: only tested when taking actions (e.g., can\'t issue debt if leverage > 5x).',
              'Covenants protect against: excessive leverage, asset sales, dividend payments, mergers.',
              'Weaker covenants = higher yield (less protection).',
            ],
            hint: 'Covenants restrict company actions to protect bondholders',
            difficulty: 'medium',
            targetTime: 90,
          },
        ],
      },
      'municipal-bonds': {
        id: 'municipal-bonds',
        label: 'Municipal bonds',
        questions: [
          {
            id: 1,
            question: 'What is the difference between general obligation bonds and revenue bonds?',
            answer: 'General obligation bonds are backed by the full taxing power of the municipality, while revenue bonds are backed only by specific revenue streams (e.g., toll roads, water utilities). GO bonds typically have lower yields due to lower risk.',
            explanation: [
              'GO bonds: backed by unlimited taxing authority, stronger credit, lower yields.',
              'Revenue bonds: backed by specific project revenues, project-specific risk, higher yields.',
              'GO bonds have broader security, revenue bonds depend on project success.',
              'Revenue bonds can default even if municipality is solvent.',
            ],
            hint: 'Think about the source of repayment',
            difficulty: 'easy',
            targetTime: 60,
          },
          {
            id: 2,
            question: 'How does the tax-equivalent yield work for municipal bonds?',
            answer: 'Tax-equivalent yield = Municipal yield / (1 - Tax rate). This allows investors to compare tax-exempt munis with taxable bonds. For example, a 3% muni yield equals a 4.29% taxable yield for someone in the 30% tax bracket.',
            explanation: [
              'Formula: Tax-equivalent yield = Munis yield / (1 - marginal tax rate).',
              'Example: 3% muni / (1 - 0.30) = 4.29% equivalent taxable yield.',
              'Higher tax bracket = higher benefit from munis.',
              'Compare to taxable corporate/Treasury yields to make investment decision.',
            ],
            hint: 'Adjust for tax savings to compare apples to apples',
            difficulty: 'medium',
            targetTime: 75,
          },
        ],
      },
      'mbs': {
        id: 'mbs',
        label: 'MBS',
        questions: [
          {
            id: 1,
            question: 'What is prepayment risk in mortgage-backed securities and how does it affect investors?',
            answer: 'Prepayment risk occurs when homeowners refinance or pay off mortgages early, typically when rates fall. This forces MBS investors to reinvest principal at lower rates, reducing returns. Measured by CPR (Constant Prepayment Rate) and PSA models.',
            explanation: [
              'Prepayment risk: homeowners pay off mortgages early (refinancing, moving, default).',
              'When rates fall, prepayments accelerate (refinancing boom).',
              'Investors receive principal back early, must reinvest at lower rates.',
              'Extension risk: when rates rise, prepayments slow, extending duration.',
            ],
            hint: 'Prepayment is like call risk on bonds',
            difficulty: 'hard',
            targetTime: 90,
          },
          {
            id: 2,
            question: 'What is the difference between pass-through securities and CMOs?',
            answer: 'Pass-throughs distribute principal and interest proportionally to all investors. CMOs (Collateralized Mortgage Obligations) redistribute cash flows into tranches with different risk/return profiles, allowing investors to select desired prepayment exposure and maturity.',
            explanation: [
              'Pass-throughs: simple structure, all investors share prepayments proportionally.',
              'CMOs: tranches with different prepayment priorities (sequential pay, PAC/TAC, support).',
              'CMO equity tranche absorbs prepayments first, senior tranches more stable.',
              'Allows investors to match prepayment risk to their needs.',
            ],
            hint: 'CMOs restructure cash flows to create different risk profiles',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'abs': {
        id: 'abs',
        label: 'ABS',
        questions: [
          {
            id: 1,
            question: 'How does credit enhancement work in asset-backed securities?',
            answer: 'Credit enhancement protects investors through subordination (junior tranches absorb losses first), overcollateralization (more assets than liabilities), excess spread (interest collected exceeds interest paid), and reserve accounts. This allows senior tranches to achieve higher credit ratings.',
            explanation: [
              'Subordination: losses hit equity, then mezzanine, then senior tranches.',
              'Overcollateralization: pool value > bond principal (e.g., 110% coverage).',
              'Excess spread: interest income > interest expense, builds reserve.',
              'Reserve accounts: cash buffer for losses.',
            ],
            hint: 'Multiple layers protect senior investors',
            difficulty: 'hard',
            targetTime: 90,
          },
          {
            id: 2,
            question: 'What types of assets are commonly securitized in ABS, and what risks are specific to each?',
            answer: 'Common assets include auto loans (residual value risk), credit cards (revolving nature, charge-offs), student loans (default risk, lack of collateral), and equipment leases. Each has unique default patterns, recovery rates, and cash flow characteristics.',
            explanation: [
              'Auto loans: secured by car, but depreciation risk, repossession costs.',
              'Credit cards: unsecured, high charge-offs, revolving balances.',
              'Student loans: government guaranteed (lower risk) vs private (higher risk).',
              'Equipment leases: residual value risk, obsolescence risk.',
            ],
            hint: 'Each asset class has unique default and recovery characteristics',
            difficulty: 'medium',
            targetTime: 75,
          },
        ],
      },
      'clos': {
        id: 'clos',
        label: 'CLOs',
        questions: [
          {
            id: 1,
            question: 'How do CLOs differ from CDOs, and what happened to CDOs during the 2008 crisis?',
            answer: 'CLOs are backed by leveraged loans to companies, while CDOs can contain various debt types. During 2008, CDOs backed by subprime mortgages failed due to correlated defaults and flawed ratings. CLOs performed better due to greater diversification, floating rates, and stronger covenants.',
            explanation: [
              'CLOs: collateral = leveraged loans (senior secured, floating rate).',
              'CDOs: collateral = various (mortgages, bonds, other CDOs).',
              '2008: CDOs failed due to correlated mortgage defaults, rating agency errors.',
              'CLOs: better performance due to diversification, active management, floating rates.',
            ],
            hint: 'CLOs are more standardized and actively managed',
            difficulty: 'hard',
            targetTime: 90,
          },
          {
            id: 2,
            question: 'What is the role of the CLO manager and what are the key waterfall provisions?',
            answer: 'The CLO manager actively trades the underlying loan portfolio during the reinvestment period (typically 4-5 years). The waterfall dictates cash distribution: senior tranches paid first, then mezzanine, then equity. Coverage tests (OC/IC ratios) can divert cash from equity to pay down debt.',
            explanation: [
              'Manager: selects loans, trades portfolio, manages risk during reinvestment period.',
              'Waterfall: interest → senior fees → senior tranches → mezzanine → equity.',
              'OC test: overcollateralization ratio (assets/liabilities), if fails, cash diverted to pay down debt.',
              'IC test: interest coverage ratio, similar protection for senior tranches.',
            ],
            hint: 'Waterfall and coverage tests protect senior investors',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'emerging-market-debt': {
        id: 'emerging-market-debt',
        label: 'Emerging market debt',
        questions: [
          {
            id: 1,
            question: 'What is the difference between hard currency and local currency EM debt, and what are the risks of each?',
            answer: 'Hard currency debt (USD/EUR denominated) has FX risk for the issuer but not the investor, with lower yields. Local currency debt has FX risk for investors but offers higher yields and benefits from currency appreciation. Local currency also faces inflation and political risks.',
            explanation: [
              'Hard currency: USD/EUR, no FX risk for investor, but issuer faces FX risk.',
              'Local currency: FX risk for investor, but can benefit from currency appreciation.',
              'Hard currency: lower yields, more liquid, less volatile.',
              'Local currency: higher yields, currency exposure, inflation risk, political risk.',
            ],
            hint: 'Currency denomination determines who bears FX risk',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'How do you assess sovereign credit risk in emerging markets?',
            answer: 'Key factors include: debt/GDP ratio, external debt service capacity, foreign exchange reserves, current account balance, political stability, institutional quality, growth prospects, and inflation. The EMBI (Emerging Markets Bond Index) spread reflects risk premium over US Treasuries.',
            explanation: [
              'Debt metrics: debt/GDP, external debt/exports, debt service ratio.',
              'FX reserves: months of import coverage, adequacy for external debt.',
              'Political: regime stability, policy credibility, rule of law.',
              'Economic: growth, inflation, current account, commodity dependence.',
            ],
            hint: 'Assess both economic fundamentals and political stability',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
    },
  },
  'equity': {
    id: 'equity',
    label: 'Equities',
    color: '#10b981',
    subcategories: {
      'cash-equities': {
        id: 'cash-equities',
        label: 'Cash equities',
        questions: [
          {
            id: 1,
            question: 'What factors drive the bid-ask spread in equity trading?',
            answer: 'Spreads are driven by: liquidity (volume, market cap), volatility (higher vol = wider spreads), information asymmetry, inventory risk for market makers, order size, and market structure (exchange vs OTC). Large-cap stocks typically have tighter spreads than small-caps.',
            explanation: [
              'Liquidity: high volume, large market cap = tighter spreads.',
              'Volatility: higher vol = wider spreads (compensation for risk).',
              'Information asymmetry: informed trading widens spreads.',
              'Market structure: exchange-traded tighter than OTC.',
            ],
            hint: 'Spreads compensate market makers for risk and costs',
            difficulty: 'medium',
            targetTime: 60,
          },
          {
            id: 2,
            question: 'How do different order types work, and when would you use a limit order vs market order?',
            answer: 'Market orders execute immediately at best available price (risk: slippage). Limit orders specify maximum buy/minimum sell price (risk: non-execution). Use market orders for liquidity/speed; limit orders to control price, especially in illiquid stocks or volatile markets. Stop orders trigger market/limit orders at specified prices.',
            explanation: [
              'Market order: immediate execution, price uncertainty (slippage).',
              'Limit order: price control, execution uncertainty.',
              'Stop order: triggers at price level (stop-loss, stop-entry).',
              'Use market for liquid stocks, limit for illiquid or volatile.',
            ],
            hint: 'Trade-off between execution certainty and price control',
            difficulty: 'easy',
            targetTime: 45,
          },
        ],
      },
      'equity-derivatives': {
        id: 'equity-derivatives',
        label: 'Equity derivatives',
        questions: [
          {
            id: 1,
            question: 'Explain put-call parity and why it matters for pricing.',
            answer: 'Put-call parity: C - P = S - K*e^(-rt). This relationship ensures no arbitrage exists between calls, puts, stock, and bonds. If violated, arbitrageurs can profit risk-free by buying undervalued side and selling overvalued side. Critical for synthetic position creation.',
            explanation: [
              'Put-call parity links options, stock, and risk-free rate.',
              'If violated: arbitrage opportunity (risk-free profit).',
              'Synthetic positions: long call + short put = long stock (synthetic forward).',
              'Used for: hedging, creating leverage, tax/regulatory arbitrage.',
            ],
            hint: 'Arbitrage-free relationship between related securities',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'What are the Greeks in options trading and how do traders use them?',
            answer: 'Delta (price sensitivity), Gamma (delta change rate), Theta (time decay), Vega (volatility sensitivity), Rho (interest rate sensitivity). Traders hedge delta to remain neutral to price moves, manage gamma to control delta stability, and trade vega to profit from volatility changes.',
            explanation: [
              'Delta: ∂Option/∂Stock, hedge to remain delta-neutral.',
              'Gamma: ∂Delta/∂Stock, high gamma = delta changes rapidly.',
              'Theta: time decay, negative for long options.',
              'Vega: volatility sensitivity, important for vol traders.',
            ],
            hint: 'Greeks measure sensitivity to different risk factors',
            difficulty: 'medium',
            targetTime: 60,
          },
        ],
      },
      'equity-linked-products': {
        id: 'equity-linked-products',
        label: 'Equity-linked products',
        questions: [
          {
            id: 1,
            question: 'How do convertible bonds work and what are their key sensitivities?',
            answer: 'Convertibles are bonds convertible to stock at a specified ratio/price. They behave like bonds when stock price is low (bond floor) and like equity when stock price is high. Sensitive to credit spreads, interest rates, stock price, and implied volatility (conversion option value).',
            explanation: [
              'Convertible = bond + call option on stock.',
              'Bond floor: minimum value (straight bond value).',
              'Conversion premium: price above conversion value.',
              'Sensitive to: credit, rates, stock price, volatility.',
            ],
            hint: 'Hybrid security with bond and equity characteristics',
            difficulty: 'hard',
            targetTime: 90,
          },
          {
            id: 2,
            question: 'What is a structured note and how might it be used by investors?',
            answer: 'Structured notes combine a bond with derivatives to create custom payoffs (e.g., principal protected with equity upside, yield enhancement with downside participation). Used for: accessing hard-to-reach markets, tax efficiency, customized risk/return profiles. Key risk: issuer credit risk.',
            explanation: [
              'Structure: zero-coupon bond + derivative (option, swap).',
              'Principal protected: bond provides floor, option provides upside.',
              'Yield enhancement: sell options to boost coupon.',
              'Risks: issuer default, liquidity, complexity, hidden costs.',
            ],
            hint: 'Customized payoff combining fixed income and derivatives',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'prime-brokerage': {
        id: 'prime-brokerage',
        label: 'Prime brokerage',
        questions: [
          {
            id: 1,
            question: 'What services do prime brokers provide to hedge funds?',
            answer: 'Services include: securities lending for short selling, margin financing/leverage, trade execution and clearing, custody, cash management, capital introduction to investors, risk analytics, and operational support. Prime brokers earn through lending spreads, financing rates, and commissions.',
            explanation: [
              'Securities lending: enable short selling, earn lending fees.',
              'Margin financing: provide leverage, earn financing spread.',
              'Execution/clearing: trade processing, earn commissions.',
              'Capital introduction: connect funds with investors.',
            ],
            hint: 'Prime brokers are one-stop shop for hedge fund operations',
            difficulty: 'medium',
            targetTime: 60,
          },
          {
            id: 2,
            question: 'How does securities lending work and what are the risks for each party?',
            answer: 'Lender provides securities to borrower (short seller) for a fee, with collateral (typically 102-105%). Lender risks: collateral value decline, counterparty default, reinvestment risk. Borrower risks: recall (forced return), collateral calls, dividend payments, voting rights loss.',
            explanation: [
              'Lender: earns fee, maintains economic exposure, receives collateral.',
              'Borrower: pays fee, posts collateral, can short sell.',
              'Lender risks: collateral haircut, reinvestment at lower rates.',
              'Borrower risks: recall risk, margin calls, dividend payments.',
            ],
            hint: 'Securities lending enables short selling with collateral protection',
            difficulty: 'medium',
            targetTime: 75,
          },
        ],
      },
    },
  },
  'foreign-exchange': {
    id: 'foreign-exchange',
    label: 'Foreign Exchange',
    color: '#8b5cf6',
    subcategories: {
      'spot-fx': {
        id: 'spot-fx',
        label: 'Spot FX',
        questions: [
          {
            id: 1,
            question: 'What drives short-term vs long-term exchange rate movements?',
            answer: 'Short-term: interest rate differentials (carry trade), risk sentiment, technical levels, central bank intervention, news/data releases. Long-term: purchasing power parity, productivity differentials, current account balances, terms of trade. Short-term often dominated by capital flows; long-term by trade flows.',
            explanation: [
              'Short-term: capital flows, carry trades, risk-on/risk-off sentiment.',
              'Long-term: PPP, productivity, current account, terms of trade.',
              'Interest rate differentials drive short-term via carry trades.',
              'Trade flows and fundamentals drive long-term trends.',
            ],
            hint: 'Different drivers for different time horizons',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'How do you calculate cross rates and why do triangular arbitrage opportunities exist?',
            answer: 'Cross rates derive from two currency pairs vs a common currency (e.g., EUR/GBP from EUR/USD and GBP/USD). Triangular arbitrage exists briefly due to: different liquidity in currency pairs, market microstructure, latency in price updates. High-frequency traders exploit these tiny discrepancies.',
            explanation: [
              'Cross rate: EUR/GBP = (EUR/USD) / (GBP/USD).',
              'Triangular arbitrage: if EUR/GBP ≠ (EUR/USD)/(GBP/USD), arbitrage exists.',
              'Opportunities: brief, due to liquidity differences, latency.',
              'HFT firms exploit microsecond pricing discrepancies.',
            ],
            hint: 'Cross rates must be consistent to prevent arbitrage',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'fx-forwards': {
        id: 'fx-forwards',
        label: 'FX forwards',
        questions: [
          {
            id: 1,
            question: 'How are FX forward rates calculated and what is covered interest parity?',
            answer: 'Forward rate = Spot * (1 + rd) / (1 + rf), where rd is domestic rate, rf is foreign rate. Covered interest parity says forward premium/discount equals interest rate differential. If violated, arbitrage exists: borrow in low-rate currency, invest in high-rate, hedge with forward.',
            explanation: [
              'Forward rate formula: F = S × (1 + rd) / (1 + rf).',
              'Covered interest parity: forward premium = interest rate differential.',
              'If violated: arbitrage opportunity (borrow, invest, hedge).',
              'Basis risk: actual forward may differ from theoretical due to market frictions.',
            ],
            hint: 'Forward rate reflects interest rate differential',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'What is the difference between outright forwards and FX swaps?',
            answer: 'Outright forwards: single exchange at future date, used for hedging or speculation. FX swaps: simultaneous spot and opposite forward transactions (or two forwards), used for rolling positions, managing liquidity, or adjusting settlement dates. Swaps are larger market (institutional liquidity management).',
            explanation: [
              'Outright forward: single future exchange, one settlement date.',
              'FX swap: spot + opposite forward (or two forwards), two settlement dates.',
              'Swaps: used for liquidity management, rolling positions.',
              'Swap market larger than outright forward market.',
            ],
            hint: 'Swaps involve two transactions, forwards involve one',
            difficulty: 'medium',
            targetTime: 60,
          },
        ],
      },
      'fx-swaps': {
        id: 'fx-swaps',
        label: 'FX swaps',
        questions: [
          {
            id: 1,
            question: 'How do cross-currency swaps work and when are they used?',
            answer: 'Cross-currency swaps exchange principal and interest payments in different currencies. Initial exchange of principals, periodic interest payments (fixed or floating), final re-exchange of principals. Used for: funding in foreign currency, hedging long-term FX exposure, arbitraging interest rate differentials.',
            explanation: [
              'Structure: initial principal exchange, periodic interest payments, final re-exchange.',
              'Fixed-fixed: both sides fixed rates.',
              'Fixed-floating: one side fixed, one floating.',
              'Uses: foreign currency funding, long-term FX hedging, basis trading.',
            ],
            hint: 'Long-term FX hedging with interest rate component',
            difficulty: 'hard',
            targetTime: 90,
          },
          {
            id: 2,
            question: 'What is basis risk in cross-currency swaps?',
            answer: 'Basis is the spread over the theoretical pricing (interest rate differential). Post-2008, USD basis became significantly negative due to dollar funding demand from non-US banks. Basis reflects credit risk, liquidity premiums, supply/demand imbalances, and regulatory costs. Can create arbitrage opportunities.',
            explanation: [
              'Basis = actual swap rate - theoretical (rate differential).',
              'Post-2008: USD basis negative (dollar funding premium).',
              'Drivers: credit risk, liquidity, supply/demand, regulation.',
              'Basis trading: profit from basis convergence/divergence.',
            ],
            hint: 'Basis reflects market frictions beyond interest rate differential',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'fx-options-em': {
        id: 'fx-options-em',
        label: 'FX options & Emerging market currencies',
        questions: [
          {
            id: 1,
            question: 'What unique risks do EM currencies face compared to G10 currencies?',
            answer: 'Higher volatility, lower liquidity (wider spreads), political risk, capital controls, currency intervention, inflation volatility, commodity dependence, sudden stops in capital flows, and convertibility risk. EM currencies often exhibit higher correlation during crisis periods (contagion).',
            explanation: [
              'Volatility: EM currencies much more volatile than G10.',
              'Liquidity: wider spreads, lower volumes, market hours limitations.',
              'Political: regime changes, policy uncertainty, capital controls.',
              'Contagion: EM currencies correlate during crises.',
            ],
            hint: 'EM currencies have multiple additional risk factors',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'How do you trade volatility in emerging market FX options?',
            answer: 'EM FX vol shows: higher levels than G10, steeper skew (puts expensive reflecting devaluation risk), event-driven spikes (elections, central bank meetings), carry-vol relationship (high carry = low vol until crisis). Strategies: straddles on events, skew trading, vol term structure trades.',
            explanation: [
              'EM vol characteristics: higher base vol, steeper skew, event spikes.',
              'Skew: puts expensive (devaluation risk), calls cheaper.',
              'Events: elections, central bank meetings create vol spikes.',
              'Strategies: event straddles, skew trades, term structure plays.',
            ],
            hint: 'EM vol trading requires understanding of local events and risks',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
    },
  },
  'commodities': {
    id: 'commodities',
    label: 'Commodities',
    color: '#f59e0b',
    subcategories: {
      'energy': {
        id: 'energy',
        label: 'Energy',
        questions: [
          {
            id: 1,
            question: 'What factors drive the relationship between crude oil futures and refined products (crack spreads)?',
            answer: 'Crack spreads (gasoline/heating oil minus crude) reflect: refinery margins, seasonal demand patterns (driving season, winter heating), refinery capacity utilization, product specifications/regulations, crude quality differentials. Refiners hedge by buying crude futures and selling product futures.',
            explanation: [
              'Crack spread = product price - crude price.',
              'Seasonal: gasoline spreads widen in summer, heating oil in winter.',
              'Refinery utilization: high utilization = tighter spreads.',
              'Hedging: refiners lock in margins via futures.',
            ],
            hint: 'Crack spread reflects refining economics',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'How does contango vs backwardation affect commodity investors and why does it occur?',
            answer: 'Contango (futures > spot): storage costs, financing, convenience yield negative. Causes roll yield losses for long investors. Backwardation (spot > futures): supply tightness, high convenience yield. Generates roll yield gains. Storage economics and supply/demand imbalances drive the term structure.',
            explanation: [
              'Contango: futures > spot, negative roll yield (buy high, sell low).',
              'Backwardation: spot > futures, positive roll yield (buy low, sell high).',
              'Storage costs and convenience yield drive term structure.',
              'Supply/demand imbalances create backwardation (tight supply).',
            ],
            hint: 'Term structure affects returns through roll yield',
            difficulty: 'medium',
            targetTime: 75,
          },
        ],
      },
      'precious-metals': {
        id: 'precious-metals',
        label: 'Precious metals',
        questions: [
          {
            id: 1,
            question: 'Why is gold considered a safe haven asset and what drives its price?',
            answer: 'Gold is driven by: real interest rates (negative correlation - higher rates hurt gold), currency movements (especially USD), inflation expectations, geopolitical risk, central bank demand, jewelry demand (India, China). Acts as safe haven due to: no counterparty risk, historical store of value, negative correlation with equities in crises.',
            explanation: [
              'Real rates: negative correlation (higher real rates = lower gold).',
              'USD: inverse relationship (stronger USD = weaker gold).',
              'Safe haven: no counterparty risk, store of value, crisis hedge.',
              'Demand: central banks, jewelry, investment.',
            ],
            hint: 'Gold is a real asset with no credit risk',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'How do gold leasing and the gold forward rate work?',
            answer: 'Central banks and bullion banks lease gold for a fee (lease rate). Gold Forward Offered Rate (GOFO) = USD LIBOR - Gold Lease Rate. When GOFO is negative, indicates physical gold shortage or high borrowing demand. Gold can be borrowed, sold spot, proceeds invested in USD, creating synthetic interest.',
            explanation: [
              'Gold leasing: borrow gold, sell spot, invest proceeds, repay with forward.',
              'GOFO = LIBOR - Lease Rate.',
              'Negative GOFO: physical gold shortage, high borrowing demand.',
              'Creates synthetic interest rate on gold.',
            ],
            hint: 'Gold leasing creates synthetic interest rate',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'base-metals': {
        id: 'base-metals',
        label: 'Base metals',
        questions: [
          {
            id: 1,
            question: 'How do base metals serve as economic indicators and what drives their prices?',
            answer: 'Copper called "Dr. Copper" for economic forecasting ability. Drivers: industrial production, construction activity, manufacturing PMIs, Chinese demand (50% of consumption), mine supply, inventory levels. Leading indicator because metals are purchased early in production cycle before broader economic impact visible.',
            explanation: [
              'Copper as indicator: purchased early in production cycle.',
              'Drivers: industrial production, construction, Chinese demand.',
              'Supply: mine production, inventory levels, scrap supply.',
              'Leading indicator: signals economic activity before GDP.',
            ],
            hint: 'Metals are inputs to production, purchased early',
            difficulty: 'medium',
            targetTime: 60,
          },
          {
            id: 2,
            question: 'What is the LME warehouse system and how does it affect metal prices?',
            answer: 'LME warehouses store physical metal backing futures contracts. Key concepts: warranted stocks (deliverable), queue (withdrawal delays creating artificial tightness), load-out rates, rent incentives. Large warehouse queues can create artificial backwardation by making physical delivery difficult despite ample supply.',
            explanation: [
              'LME warehouses: store metal backing futures.',
              'Warranted stocks: metal deliverable against futures.',
              'Queues: withdrawal delays create artificial tightness.',
              'Can create backwardation despite ample supply.',
            ],
            hint: 'Warehouse queues can distort pricing',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'agricultural': {
        id: 'agricultural',
        label: 'Agricultural commodities',
        questions: [
          {
            id: 1,
            question: 'What are the key seasonal patterns in agricultural commodity trading?',
            answer: 'Planting season (spring): uncertainty drives volatility. Growing season: weather risk premium (drought, floods). Pre-harvest: prices typically fall on supply certainty. Post-harvest: harvest pressure drives prices down. Storage plays (carry trade): buy post-harvest, sell pre-next-harvest. "Sell in May" often applies to grains.',
            explanation: [
              'Planting: uncertainty, volatility high.',
              'Growing: weather risk premium.',
              'Pre-harvest: prices fall (supply certainty).',
              'Post-harvest: harvest pressure, then storage plays.',
            ],
            hint: 'Seasonal patterns driven by crop cycle',
            difficulty: 'medium',
            targetTime: 60,
          },
          {
            id: 2,
            question: 'How do weather derivatives and crop insurance work in agricultural markets?',
            answer: 'Weather derivatives (HDD/CDD for heating/cooling, rainfall, snowfall) pay based on weather index, not crop yield. Advantages: no moral hazard, faster payouts, no crop inspection. Crop insurance pays for yield losses due to weather, pests, disease. Basis risk exists when index doesn\'t match actual loss.',
            explanation: [
              'Weather derivatives: index-based, no moral hazard, fast payouts.',
              'Crop insurance: yield-based, covers weather, pests, disease.',
              'Basis risk: index may not match actual losses.',
              'Used by: farmers, agribusiness, speculators.',
            ],
            hint: 'Weather derivatives are index-based, crop insurance is yield-based',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
    },
  },
  'credit': {
    id: 'credit',
    label: 'Credit',
    color: '#ef4444',
    subcategories: {
      'cds': {
        id: 'cds',
        label: 'Credit Default Swaps (CDS)',
        questions: [
          {
            id: 1,
            question: 'How does a CDS contract work and how is it used for hedging vs speculation?',
            answer: 'CDS buyer pays periodic premium to seller for protection against default. If credit event occurs, seller compensates buyer (physical settlement: deliver bonds, get par; cash settlement: pay par minus recovery). Hedging: bondholders buy protection. Speculation: express credit views without owning bonds, short selling credit.',
            explanation: [
              'CDS structure: buyer pays premium, seller provides protection.',
              'Credit events: bankruptcy, failure to pay, restructuring.',
              'Settlement: physical (deliver bonds) or cash (par - recovery).',
              'Uses: hedging bond exposure, speculating on credit, basis trading.',
            ],
            hint: 'CDS is insurance on credit risk',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'What is the CDS-bond basis and what drives it?',
            answer: 'Basis = CDS spread - Bond spread (over risk-free rate). Positive basis (CDS wider): funding costs, counterparty risk, cheapest-to-deliver option. Negative basis (CDS tighter): bond scarcity, technical factors, repo market conditions. Basis trading captures mispricings between cash and synthetic credit markets.',
            explanation: [
              'Basis = CDS spread - bond spread.',
              'Positive basis: CDS wider than bond spread.',
              'Negative basis: CDS tighter than bond spread.',
              'Drivers: funding, counterparty risk, bond scarcity, repo conditions.',
            ],
            hint: 'Basis reflects pricing differences between cash and synthetic credit',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'total-return-swaps': {
        id: 'total-return-swaps',
        label: 'Total return swaps',
        questions: [
          {
            id: 1,
            question: 'What are the advantages of using total return swaps versus owning the underlying asset?',
            answer: 'TRS advantages: no upfront capital (leverage), avoid physical settlement, tax efficiency, regulatory capital relief for banks, access to restricted assets, confidentiality (off-balance sheet). Total receiver gets price appreciation and income; payer gets LIBOR + spread. Used by hedge funds for leverage and banks for capital management.',
            explanation: [
              'TRS: exchange total return of asset for LIBOR + spread.',
              'Advantages: leverage, no physical settlement, capital efficiency.',
              'Receiver: gets asset return without owning.',
              'Payer: earns spread, transfers asset risk.',
            ],
            hint: 'TRS provides synthetic exposure without ownership',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'What are the key risks in a total return swap for both parties?',
            answer: 'Total return receiver: counterparty risk (if payer defaults during positive MTM), leverage risk (magnified losses), margin calls. Total return payer: market risk (asset declines), dividend/coupon payment obligations, repo funding risk. Both face: liquidity risk (unwinding position), documentation risk, operational complexity.',
            explanation: [
              'Receiver risks: counterparty default, leverage, margin calls.',
              'Payer risks: asset decline, dividend payments, funding risk.',
              'Both: liquidity, documentation, operational risks.',
              'Mitigation: collateral, netting, credit limits.',
            ],
            hint: 'TRS creates counterparty and market risks for both sides',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'credit-indices': {
        id: 'credit-indices',
        label: 'Credit indices',
        questions: [
          {
            id: 1,
            question: 'How do credit indices like CDX and iTraxx work and why are they important?',
            answer: 'CDX (North America) and iTraxx (Europe) are standardized CDS indices on baskets of credits (typically 125 names). Roll every 6 months with new series. Used for: broad credit exposure, hedging portfolios, relative value trades (index vs single names), market sentiment gauge. Liquid, transparent pricing vs individual CDS.',
            explanation: [
              'CDX/iTraxx: standardized baskets of 125 credits.',
              'Roll: new series every 6 months.',
              'Uses: broad exposure, hedging, relative value, sentiment.',
              'Advantages: liquidity, transparency, diversification.',
            ],
            hint: 'Standardized indices provide liquid credit exposure',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'What is a tranche trade in credit indices and how does it create leverage?',
            answer: 'Tranches divide credit risk into layers: equity (0-3%), junior mezzanine (3-7%), senior mezzanine (7-10%), senior (10-15%), super senior (15-30%). Lower tranches absorb losses first, creating leverage. Equity tranche highly levered to defaults but high spread. Super senior very safe but low spread. Correlation trading central to valuation.',
            explanation: [
              'Tranches: divide credit risk into layers.',
              'Equity: first loss, highest spread, most leverage.',
              'Senior: last loss, lowest spread, least leverage.',
              'Correlation: key to tranche valuation.',
            ],
            hint: 'Tranches create leverage through loss subordination',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'swaptions': {
        id: 'swaptions',
        label: 'Swaptions',
        questions: [
          {
            id: 1,
            question: 'How do payer and receiver swaptions work and when would you use each?',
            answer: 'Payer swaption: right to enter swap paying fixed, receiving floating. Benefits from rate increases. Used by: future borrowers to cap rates, investors expecting steepening. Receiver swaption: right to receive fixed, pay floating. Benefits from rate decreases. Used by: future lenders to lock in rates, investors expecting flattening.',
            explanation: [
              'Payer swaption: right to pay fixed (benefits from rate rise).',
              'Receiver swaption: right to receive fixed (benefits from rate fall).',
              'Uses: hedging future borrowing/lending, rate speculation.',
              'Embedded in: callable bonds, structured products.',
            ],
            hint: 'Swaptions are options on interest rate swaps',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'What is volatility skew in swaptions and what does it indicate?',
            answer: 'Skew is difference in implied volatility across strikes. OTM payer swaptions (high strike) often have higher implied vol than receivers, indicating market fears rate spikes more than drops. Reflects: supply/demand imbalances (issuers buying payer vol for callable bond hedging), tail risk premiums, dealer positioning.',
            explanation: [
              'Skew: vol difference across strikes.',
              'Payer skew: OTM payers have higher vol (rate spike fear).',
              'Drivers: supply/demand, tail risk, dealer positioning.',
              'Trading: skew trades, relative value.',
            ],
            hint: 'Skew reflects market fears and supply/demand',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'caps-floors-inflation': {
        id: 'caps-floors-inflation',
        label: 'Caps and floors & Inflation products',
        questions: [
          {
            id: 1,
            question: 'How do interest rate caps and floors work and how are they priced?',
            answer: 'Cap: series of caplets, each an option on LIBOR/SOFR at reset date. Pays if rate exceeds strike. Floor: series of floorlets, pays if rate below strike. Priced as portfolio of European options using Black model. Used by: floating-rate borrowers (buy caps), floating-rate lenders (buy floors), structured products.',
            explanation: [
              'Cap: series of caplets, pays if rate > strike.',
              'Floor: series of floorlets, pays if rate < strike.',
              'Pricing: Black model, portfolio of European options.',
              'Uses: hedging floating-rate exposure, structured products.',
            ],
            hint: 'Caps/floors are portfolios of interest rate options',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'What are the different types of inflation-linked products and their risks?',
            answer: 'TIPS/linkers: principal adjusts with CPI. Zero-coupon inflation swaps: exchange fixed for realized inflation. Year-on-year inflation swaps: periodic inflation exchanges. Breakeven inflation = nominal yield - real yield. Risks: inflation measurement timing, seasonality, deflation floor in TIPS, liquidity risk, real rate changes.',
            explanation: [
              'TIPS: principal adjusts with CPI, deflation floor.',
              'Inflation swaps: exchange fixed for realized inflation.',
              'Breakeven: market-implied inflation expectation.',
              'Risks: measurement, seasonality, liquidity, real rates.',
            ],
            hint: 'Inflation products link returns to inflation indices',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
    },
  },
  'structured-products': {
    id: 'structured-products',
    label: 'Structured Products',
    color: '#ec4899',
    subcategories: {
      'equity-linked-notes': {
        id: 'equity-linked-notes',
        label: 'Equity-linked notes',
        questions: [
          {
            id: 1,
            question: 'How does a principal protected note work and what is the cost of the protection?',
            answer: 'Structure: zero-coupon bond (provides principal protection at maturity) + call option on equity index. Cost of protection = foregone bond yield used to buy option. Lower rates = cheaper protection, more upside participation. Example: 100% principal protection + 80% S&P 500 upside. Risk: issuer default, no interim protection.',
            explanation: [
              'Structure: zero-coupon bond + call option.',
              'Cost: foregone bond yield funds option purchase.',
              'Lower rates: cheaper protection, more upside.',
              'Risks: issuer default, no interim protection.',
            ],
            hint: 'Principal protection comes from zero-coupon bond component',
            difficulty: 'hard',
            targetTime: 90,
          },
          {
            id: 2,
            question: 'What are reverse convertibles and what risks do investors face?',
            answer: 'Investor receives high coupon but may receive stock instead of principal if stock falls below barrier (typically 70-80% of initial). Structure: short put option generates income. Risks: downside stock exposure (can lose >20%), early call risk, opportunity cost if stock rises significantly, issuer credit risk. Popular in low-rate environments for yield.',
            explanation: [
              'Reverse convertible: high coupon, but principal at risk.',
              'Structure: bond + short put option.',
              'Risks: stock downside, early call, opportunity cost.',
              'Yield enhancement product with downside risk.',
            ],
            hint: 'Reverse convertibles sell optionality for yield',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'credit-linked-notes': {
        id: 'credit-linked-notes',
        label: 'Credit-linked notes',
        questions: [
          {
            id: 1,
            question: 'How do credit-linked notes differ from regular bonds and why would investors buy them?',
            answer: 'CLNs are bonds with embedded credit default swap - investor sells credit protection. If reference entity defaults, principal reduced by loss amount. Higher yield than regular bonds (compensation for credit risk). Investors use for: yield enhancement, credit exposure without buying bonds directly, diversification, accessing otherwise unavailable credits.',
            explanation: [
              'CLN: bond + embedded CDS (investor sells protection).',
              'Higher yield: compensation for credit risk.',
              'Uses: yield enhancement, credit exposure, diversification.',
              'Risk: credit event reduces principal.',
            ],
            hint: 'CLNs embed credit risk for higher yield',
            difficulty: 'medium',
            targetTime: 75,
          },
          {
            id: 2,
            question: 'What is a first-to-default basket CLN and how does correlation affect its risk?',
            answer: 'FTD CLN references multiple credits (e.g., 5 names), pays high coupon, but triggers payout on first default. Lower correlation = higher risk (more likely one defaults) = higher spread. Higher correlation = lower risk (defaults likely simultaneous or none) = lower spread. Risk-return attractive if confident in credit selection.',
            explanation: [
              'FTD: triggers on first default among basket.',
              'Correlation: lower = higher risk = higher spread.',
              'Higher correlation: defaults simultaneous or none.',
              'Attractive if confident in credit selection.',
            ],
            hint: 'Correlation determines likelihood of first default',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
      'hybrid-products': {
        id: 'hybrid-products',
        label: 'Hybrid products',
        questions: [
          {
            id: 1,
            question: 'What are contingent convertibles (CoCos) and what triggers their conversion?',
            answer: 'CoCos are bank bonds that convert to equity or write down if capital ratio falls below threshold (e.g., 7% CET1) or regulator declares non-viability. High coupons compensate for risk. Used by banks for AT1 capital. Risks: trigger risk, equity conversion dilution, extension risk, regulatory changes. Example: Credit Suisse AT1 wipeout 2023.',
            explanation: [
              'CoCos: convert to equity or write down on trigger.',
              'Trigger: capital ratio threshold or regulatory action.',
              'High coupon: compensation for conversion risk.',
              'Risks: trigger, dilution, extension, regulatory.',
            ],
            hint: 'CoCos are loss-absorbing bank capital instruments',
            difficulty: 'hard',
            targetTime: 90,
          },
          {
            id: 2,
            question: 'How do autocallable notes work and what market conditions favor them?',
            answer: 'Autocallables observe underlying (stock/index) periodically. If above trigger (e.g., 100% of initial), automatically matures early paying enhanced coupon. If never triggered, pays at maturity based on final level (may have downside participation). Investor sells volatility (benefits from range-bound markets). Favored in low vol, sideways markets.',
            explanation: [
              'Autocallable: early maturity if underlying above trigger.',
              'Structure: investor sells volatility.',
              'Favored: low vol, range-bound markets.',
              'Risks: downside participation, early call, opportunity cost.',
            ],
            hint: 'Autocallables benefit from stable or rising markets',
            difficulty: 'hard',
            targetTime: 90,
          },
        ],
      },
    },
  },
}

